:root{
  --bg:#f7f3e8;
  --paper:#efe3c8;
  --ink:#151515;
  --muted:#62584a;

  --brand:#f2b705;
  --brand-accent:#e13b3b;
  --ring: rgba(225,59,59,.25);

  --radius:16px;
  --container:1100px;

  --fs-h1: clamp(28px, 5vw, 44px);
  --fs-h2: clamp(22px, 3.4vw, 32px);

  --ease: cubic-bezier(.2,.8,.2,1);
}

html[data-theme="dark"]{
  --bg:#050509;
  --paper:#11111a;
  --ink:#f7f3e8;
  --muted:#b8b1a4;

  --brand:#f2b705;
  --brand-accent:#ff6b35;
  --ring: rgba(242,183,5,.32);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font: 400 16px/1.6 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg);
  color:var(--ink);
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
  scroll-behavior:smooth;
}

img{max-width:100%;display:block}
a{color:inherit}
.container{max-width:var(--container);margin:0 auto;padding:0 20px}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip-link:focus{left:10px;top:10px;width:auto;height:auto;background:#fff;color:#000;padding:8px 12px;border-radius:8px;z-index:999}

/* ===== Header ===== */
.site-header{
  position:sticky;
  top:0;
  z-index:50;
  background:var(--bg);
  border-bottom:2px solid color-mix(in srgb, var(--ink) 12%, transparent);
}
.site-header .container{
  display:flex;
  align-items:center;
  justify-content:space-between;
  height:64px;
  position:relative;
}
.brand{
  display:inline-flex;align-items:center;gap:10px;
  font-weight:800;text-decoration:none;
}
.brand .brand-mark{color:var(--brand)}
.brand .brand-text span{color:var(--brand)}

.site-nav{
  display:flex;gap:12px;align-items:center;
}
.site-nav a{
  text-decoration:none;
  padding:8px 12px;
  border-radius:12px;
}
.site-nav a:hover{background:var(--paper)}
.site-nav .cta{background:var(--brand);color:#111}

.icon-btn{
  border:1px solid color-mix(in srgb, var(--ink) 14%, transparent);
  background:transparent;
  border-radius:12px;
  padding:8px 10px;
  cursor:pointer;
}
.icon-btn:hover{background:var(--paper)}

.nav-toggle{
  display:none;
  background:transparent;
  border:0;
  font-size:22px;
  cursor:pointer;
  color:var(--ink);
}

/* Language switch */
.lang-switch{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:999px;
  border:1px solid color-mix(in srgb, var(--ink) 12%, transparent);
  background:color-mix(in srgb, var(--bg) 92%, transparent);
}
.lang-link{font-weight:700;text-decoration:none;opacity:.7}
.lang-link.is-active{opacity:1}
.lang-sep{opacity:.5}

/* ===== Hero + Canvas ===== */
.hero{
  position:relative;
  overflow:hidden;
  padding:80px 0 36px;
}
#heroCanvas{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:-2;
  opacity:.9;
}
.grid-2{
  display:grid;
  grid-template-columns:1.35fr 1fr;
  gap:32px;
  align-items:center;
}
.hero-copy{
  background:color-mix(in srgb, var(--bg) 86%, #000 14%);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  border-radius:22px;
  padding:22px 22px 26px;
  box-shadow:0 18px 60px rgba(0,0,0,.18);
  position:relative;
}
.hero-tag{
  display:inline-block;
  background:var(--brand-accent);
  color:#fff;
  padding:6px 12px;
  border-radius:999px;
  font:700 12px/1 Poppins, Inter, system-ui;
  letter-spacing:.08em;
}
.hero h1{font-size:var(--fs-h1);margin:12px 0 10px}
.hero h1 span{display:block;font:800 14px/1 Poppins, Inter, system-ui;letter-spacing:.18em;color:var(--brand)}
.hero p{margin:0 0 16px;color:color-mix(in srgb, var(--ink) 70%, var(--muted))}
.hero-actions{display:flex;gap:12px;flex-wrap:wrap}

.btn{
  display:inline-flex;align-items:center;gap:8px;
  background:var(--brand);color:#111;
  border:1px solid var(--brand);
  border-radius:14px;
  padding:10px 14px;
  text-decoration:none;
  font-weight:800;
  cursor:pointer;
}
.btn:hover{filter:brightness(.97)}
.btn.ghost{background:transparent;color:var(--brand);border-color:var(--brand)}
.btn.sm{padding:8px 12px;border-radius:12px;font-size:.95em}

.hero-badges{
  list-style:none;display:flex;flex-wrap:wrap;gap:10px;
  margin:16px 0 0;padding:0;
  color:var(--muted);
}
.hero-badges li{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:999px;
  background:color-mix(in srgb, var(--paper) 70%, transparent);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
}

.hero-media{
  aspect-ratio:1/1;
  border-radius:24px;
  background:linear-gradient(135deg, color-mix(in srgb, var(--paper) 88%, var(--bg)), var(--paper));
  padding:18px;
  border:1px solid color-mix(in srgb, var(--ink) 8%, transparent);
}
.hero-media img{
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:16px;
}

/* ===== Sections ===== */
.section{padding:64px 0}
.section.alt{background:var(--paper)}
.section h2{font-size:var(--fs-h2);margin:0 0 18px}

/* About */
.about-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:14px}
.card{
  background:var(--bg);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  border-radius:16px;
  padding:18px;
  box-shadow:0 2px 0 rgba(0,0,0,.02)
}
.card i{font-size:22px;color:var(--brand)}
.card h3{margin:8px 0 6px}
.stats{display:grid;gap:14px;align-self:start}
.stat{
  background:var(--bg);
  border:1px dashed var(--brand);
  border-radius:16px;
  padding:16px;
  text-align:center
}
.stat span{display:block;font-weight:900;font-size:28px;color:var(--brand)}

/* Experience */
.xp-item{
  background:var(--bg);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  border-radius:16px;
  padding:16px 18px;
  margin:0 0 14px;
}
.xp-meta{margin:6px 0 10px;color:var(--muted);font-size:.95rem}
.xp-item ul{margin:0;padding-left:18px}
.xp-results{
  background:var(--bg);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  border-radius:16px;
  padding:16px 18px;
}
.tools-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0,1fr));
  gap:8px;
  margin-top:10px;
}
.tools-grid span{
  padding:8px 10px;border-radius:12px;
  background:color-mix(in srgb, var(--paper) 70%, transparent);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  color:var(--muted);
  font-weight:600;
  font-size:.92rem;
}

/* Skills */
.skills{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
.skill{
  background:var(--bg);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  border-radius:14px;
  padding:12px;
  text-align:center;
  display:flex;flex-direction:column;align-items:center;gap:6px
}
.skill i{font-size:22px;color:var(--brand)}

/* Filters */
.filters{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 20px}
.chip{
  border:1px solid color-mix(in srgb, var(--ink) 12%, transparent);
  background:var(--bg);
  color:var(--ink);
  border-radius:999px;
  padding:6px 12px;
  cursor:pointer;
  font-weight:700;
}
.chip.is-active,.chip:focus{
  outline:none;
  border-color:var(--brand);
  box-shadow:0 0 0 4px var(--ring);
}

/* Projects */
.projects-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.project-card{
  background:var(--bg);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  border-radius:16px;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}
.project-card img{
  aspect-ratio:16/10;
  object-fit:cover;
  background:var(--paper);
  border-bottom:1px solid color-mix(in srgb, var(--ink) 8%, transparent);
}
.project-content{padding:14px}
.project-content h3{margin:0 0 6px}
.project-content p{margin:0 0 12px;color:var(--muted)}
.project-tags{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
.project-tags span{
  font-size:.9em;
  background:var(--paper);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  border-radius:12px;
  padding:4px 8px
}
.project-actions{display:flex;gap:8px;flex-wrap:wrap}

/* ===== KPIs ===== */
.metrics-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0,1fr));
  gap:18px;
  margin-top:18px;
}
.metric-card{
  background:var(--bg);
  border-radius:var(--radius);
  padding:14px 16px 12px;
  border:1px solid color-mix(in srgb, var(--ink) 8%, transparent);
  box-shadow:0 6px 18px rgba(15,23,42,.04);
  display:flex;
  flex-direction:column;
  gap:8px;
}
.metric-header{display:flex;align-items:baseline;justify-content:space-between;gap:8px}
.metric-label{font-weight:800;font-size:.98rem}
.metric-code{
  font-family:system-ui,monospace;
  font-size:.8rem;
  padding:3px 8px;
  border-radius:999px;
  border:1px solid color-mix(in srgb, var(--ink) 12%, transparent);
  background:rgba(15,23,42,.03);
  color:var(--muted);
}
.metric-desc{margin:0;color:color-mix(in srgb, var(--ink) 85%, var(--muted))}
.metric-notes{margin:4px 0 0;padding-left:18px;font-size:.9rem;color:var(--muted)}
.metric-notes li{margin-bottom:3px}

.metrics-table{margin-top:22px}
.metrics-hint{margin:0 0 10px;font-size:.9rem;color:var(--muted)}
.metrics-table-wrap{
  width:100%;
  overflow-x:auto;
  border-radius:var(--radius);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  background:var(--bg);
  box-shadow:0 8px 24px rgba(15,23,42,.04);
}
.metrics-table table{width:100%;border-collapse:collapse;font-size:.9rem}
.metrics-table thead{background:color-mix(in srgb, var(--paper) 60%, #fff 40%)}
.metrics-table th,.metrics-table td{padding:10px 10px;text-align:left;white-space:nowrap}
.metrics-table th{font-weight:800;color:var(--muted);border-bottom:1px solid color-mix(in srgb, var(--ink) 12%, transparent)}
.metrics-table tbody tr:nth-child(even){background:rgba(15,23,42,.02)}
.metrics-table tbody tr:hover{background:rgba(184,134,11,.05)}

.badge{
  display:inline-flex;align-items:center;justify-content:center;
  padding:3px 10px;border-radius:999px;
  font-size:.82rem;font-weight:800
}
.badge-good{background:rgba(22,163,74,.12);color:rgb(22,163,74)}
.badge-watch{background:rgba(234,179,8,.14);color:rgb(202,138,4)}
.badge-great{background:rgba(37,99,235,.12);color:rgb(37,99,235)}

/* ===== Charts / AI Panel ===== */
.ai-analytics{
  position:relative;
  margin-top:26px;
  padding:18px 18px 20px;
  border-radius:18px;
  background:
    radial-gradient(circle at top, rgba(56,189,248,.10) 0, transparent 55%),
    radial-gradient(circle at bottom, rgba(129,140,248,.08) 0, transparent 60%),
    rgba(15,23,42,.03);
  overflow:hidden;
  border:1px dashed color-mix(in srgb, var(--ink) 16%, transparent);
}
.ai-header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.ai-chip{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 12px;border-radius:999px;
  border:1px solid rgba(148,163,184,.55);
  background:rgba(15,23,42,.78);
  color:#eaf4ff;
  font-size:.8rem;font-weight:800;
  letter-spacing:.08em;
  text-transform:uppercase;
  position:relative;
  overflow:hidden;
}
.ai-dot{
  width:8px;height:8px;border-radius:50%;
  background:radial-gradient(circle, #22c55e 0, #166534 60%, transparent 75%);
  box-shadow:0 0 10px rgba(34,197,94,.9);
  animation: aiDot 1.6s ease-in-out infinite;
}
@keyframes aiDot{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.45);opacity:.7}}

.charts-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
  gap:18px;
  margin:14px 0 10px;
}
.chart-card{
  background:color-mix(in srgb, var(--bg) 92%, transparent);
  border-radius:14px;
  padding:10px 10px 12px;
  border:1px solid rgba(148,163,184,.35);
  box-shadow:0 10px 26px rgba(15,23,42,.06);
  display:flex;flex-direction:column;gap:8px;
}
.chart-card img{width:100%;border-radius:10px}
.chart-card figcaption{font-size:.9rem;color:var(--muted)}

.code-toggle{
  margin-top:14px;border-radius:10px;
  border:1px dashed rgba(148,163,184,.6);
  padding:8px 10px;
  background:rgba(15,23,42,.02);
}
.code-toggle summary{cursor:pointer;font-weight:800}
.code-block{
  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:.82rem;line-height:1.5;margin-top:8px;
  white-space:pre;overflow-x:auto;
}

/* ===== Neural Section ===== */
.neural-section{
  position:relative;
  overflow:hidden;
  background:
    radial-gradient(circle at 0 0, rgba(225,59,59,.16) 0, transparent 55%),
    radial-gradient(circle at 100% 100%, rgba(242,183,5,.12) 0, transparent 60%),
    #050509;
  color:#eaeaea;
}
.neural-section .container{align-items:center}
.neural-copy p{max-width:40rem;color:rgba(255,255,255,.78)}
.neural-phrases{margin-top:14px;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
.neural-phrase-label{display:inline-block;font-size:.85rem;letter-spacing:.12em;text-transform:uppercase;color:rgba(255,255,255,.65)}
.neural-phrase-line{
  display:inline-block;
  margin-top:8px;
  padding:10px 14px;
  border-radius:999px;
  background:rgba(15,23,42,.88);
  border:1px solid rgba(148,163,184,.55);
  color:#fff;
  box-shadow:0 14px 30px rgba(0,0,0,.45);
}
.neural-visual{position:relative;min-height:300px}
#neuralCanvas{position:absolute;inset:0;width:100%;height:100%}

/* ===== Designs carousel ===== */
.designs-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:18px;
  margin-top:18px;
}
.design-card{
  background:var(--bg);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  border-radius:16px;
  padding:16px;
  box-shadow:0 2px 0 rgba(0,0,0,.02);
  display:flex;
  flex-direction:column;
  gap:12px;
}
.design-header h3{margin:0 0 4px}
.design-header p{margin:0;color:var(--muted)}

.design-carousel{
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  gap:10px;
}
.carousel-viewport{
  overflow:hidden;
  border-radius:14px;
  border:1px solid color-mix(in srgb, var(--ink) 8%, transparent);
  background:var(--paper);
}
.carousel-track img{
  width:100%;
  height:auto;
  object-fit:contain;
  display:none;
}
.carousel-track img.is-active{display:block}

.carousel-btn{
  border-radius:999px;
  border:1px solid color-mix(in srgb, var(--ink) 12%, transparent);
  background:var(--bg);
  padding:6px 10px;
  cursor:pointer;
  font-size:18px;
  line-height:1;
}
.carousel-btn:hover{background:var(--paper)}

.carousel-dots{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
.carousel-dots .dot{
  border-radius:999px;
  border:1px solid color-mix(in srgb, var(--ink) 12%, transparent);
  background:transparent;
  padding:4px 10px;
  font-size:.85em;
  cursor:pointer;
  color:var(--muted);
}
.carousel-dots .dot.is-active{
  border-color:var(--brand);
  color:var(--ink);
  box-shadow:0 0 0 3px var(--ring);
}

/* ===== Videos ===== */
.video-grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:18px;
  margin-top:18px;
}
.video-card{
  background:var(--bg);
  border-radius:var(--radius);
  padding:14px;
  border:1px solid color-mix(in srgb, var(--ink) 8%, transparent);
  box-shadow:0 2px 0 rgba(15,17,21,.04);
  display:flex;
  flex-direction:column;
  gap:10px;
}
.video-card h3{margin:0;font-size:1rem}
.video-desc{margin:0;font-size:.9rem;color:var(--muted)}
.video-frame{
  position:relative;
  width:100%;
  aspect-ratio:16/9;
  border-radius:12px;
  overflow:hidden;
  background:#000;
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
}
.video-frame iframe,
.video-frame video{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  border:0;
}

/* ===== Contact ===== */
.contact-list{list-style:none;margin:0 0 14px;padding:0;color:var(--muted)}
.contact-list li{margin:6px 0}
.contact-form{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  background:var(--bg);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  border-radius:16px;
  padding:16px
}
.contact-form label{display:grid;gap:6px}
.contact-form label.full{grid-column:1/-1}
.contact-form input,
.contact-form textarea{
  border:1px solid color-mix(in srgb, var(--ink) 12%, transparent);
  background:transparent;
  border-radius:12px;
  padding:10px;
  outline:none;
  color:var(--ink)
}
.contact-form input:focus,
.contact-form textarea:focus{
  border-color:var(--brand);
  box-shadow:0 0 0 4px var(--ring)
}
.error{color:#b42318;min-height:18px}
.form-status{margin:0;color:var(--muted)}

/* ===== Footer / ToTop ===== */
.site-footer{
  border-top:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  padding:18px 0;
  background:var(--bg);
  color:var(--muted);
  text-align:center
}
.to-top{
  position:fixed;
  right:16px;
  bottom:16px;
  border-radius:999px;
  border:1px solid color-mix(in srgb, var(--ink) 12%, transparent);
  background:var(--bg);
  padding:10px 12px;
  cursor:pointer;
  box-shadow:0 4px 16px rgba(0,0,0,.15)
}

/* ===== Modal (dialog) ===== */
.modal{
  border:0;
  border-radius:18px;
  max-width:min(860px,92vw);
  padding:0;
  box-shadow:0 20px 100px rgba(0,0,0,.35);
  background:transparent;
}
.modal::backdrop{background:rgba(0,0,0,.55)}
.modal-card{
  display:flex;
  flex-direction:column;
  background:var(--bg);
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  border-radius:18px;
  overflow:hidden
}
.modal-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 16px;
  border-bottom:1px solid color-mix(in srgb, var(--ink) 10%, transparent)
}
.modal-title{margin:0;font-size:18px}
.modal-close{border:0;background:transparent;font-size:24px;cursor:pointer;color:var(--ink)}
.modal-body{padding:14px}
.modal-img{
  width:100%;
  border-radius:12px;
  border:1px solid color-mix(in srgb, var(--ink) 10%, transparent);
  margin-bottom:10px
}
.modal-actions{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}

/* ===== Reveal ===== */
.reveal{opacity:0;transform:translateY(16px);transition:opacity .6s ease, transform .6s ease}
.reveal.visible{opacity:1;transform:translateY(0)}
@media (prefers-reduced-motion: reduce){
  .reveal{opacity:1;transform:none;transition:none}
}

/* ===== Responsive ===== */
@media (max-width: 980px){
  .grid-2{grid-template-columns:1fr}
  .about-cards{grid-template-columns:1fr 1fr}
  .skills{grid-template-columns:repeat(4,1fr)}
  .projects-grid{grid-template-columns:1fr 1fr}
  .video-grid{grid-template-columns:repeat(2,1fr)}
  .designs-grid{grid-template-columns:1fr}

  .site-header .container{height:58px}
  .nav-toggle{display:inline-flex}

  .site-nav{
    position:fixed;
    inset:58px 0 auto 0;
    background:var(--bg);
    display:none;
    flex-direction:column;
    padding:14px;
    border-bottom:1px solid color-mix(in srgb, var(--ink) 10%, transparent)
  }
  .site-nav.open{display:flex}
}
@media (max-width: 640px){
  .about-cards{grid-template-columns:1fr}
  .skills{grid-template-columns:repeat(2,1fr)}
  .projects-grid{grid-template-columns:1fr}
  .contact-form{grid-template-columns:1fr}
  .video-grid{grid-template-columns:1fr}
}
/* ===============================
   PATCH ÚNICO (HEADER + CANVAS + NEURAL)
   PÉGALO AL FINAL del style.css
   =============================== */

/* Variables de header por tema */
:root{
  --header-bg: rgba(255,255,255,.90);
  --header-ink: #0f1115;
  --header-border: rgba(15,17,21,.10);
  --header-hover: rgba(15,17,21,.06);
  --header-chip-border: rgba(15,17,21,.14);
}
html[data-theme="dark"]{
  --header-bg: rgba(10,12,18,.78);
  --header-ink: #f7f3e8;
  --header-border: rgba(255,255,255,.10);
  --header-hover: rgba(255,255,255,.08);
  --header-chip-border: rgba(255,255,255,.18);
}

/* Header “glass” SIN romper layout */
.site-header{
  background: var(--header-bg);
  color: var(--header-ink);
  border-bottom: 1px solid var(--header-border);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  overflow: hidden; /* para que el canvas no saque scroll raro */
}

/* El contenido del header siempre arriba */
.site-header .container{
  position: relative;
  z-index: 2;
}

/* Links y controles visibles */
.site-header .brand,
.site-header .brand-text,
.site-header .nav-toggle,
.site-header .icon-btn{
  color: var(--header-ink);
}

.site-header .site-nav a{
  color: var(--header-ink);
  opacity: .95;
  font-weight: 700;
}
.site-header .site-nav a:hover{
  background: var(--header-hover);
  opacity: 1;
}

/* Botón idioma y bordes en header */
.site-header .lang-switch{
  border-color: var(--header-chip-border);
  background: color-mix(in srgb, var(--header-bg) 86%, transparent);
}
.site-header .icon-btn{
  border-color: var(--header-chip-border);
}

/* CTA se mantiene con tu brand */
.site-header .site-nav .cta{
  background: var(--brand);
  color: #111;
  border-color: var(--brand);
}

/* ===== Canvas en HEADER (robotcito) =====
   Esto SOLO aplica si tu <canvas id="heroCanvas"> está dentro del header.
   Si no está ahí, no afecta nada. */
.site-header #heroCanvas{
  position: absolute;
  inset: -28px 0 -28px 0;     /* un poquito más grande para que “respire” */
  width: 100%;
  height: calc(100% + 56px);
  pointer-events: none;
  z-index: 0;                 /* atrás del contenido, pero dentro del header */
  opacity: .38;               /* evita que “apague” el menú */
  filter: saturate(1.08) contrast(1.08);
}

/* ===== Canvas en HERO (tu configuración original) =====
   Esto evita que el patch del header afecte el canvas del hero. */
.hero #heroCanvas{
  z-index: -2;
  opacity: .9;
}

/* Mobile: compat para .open y .is-open */
@media (max-width: 980px){
  .site-nav{
    background: var(--header-bg);
    border-bottom: 1px solid var(--header-border);
  }
  .site-nav.open,
  .site-nav.is-open{
    display: flex;
  }
}

/* ===== Neural: solo asegurar “frame” y canvas visible (sin duplicar media estética) ===== */
.neural-visual{
  position: relative;
  min-height: 360px;
  border-radius: 22px;
  overflow: hidden;
}
#neuralCanvas{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
  pointer-events: none;
}

/* ===== HOTFIX: "Ideas conectadas" (neural) visible SIEMPRE ===== */
.neural-visual,
.neural-frame{
  position: relative;
  min-height: 360px;          /* evita 0px de alto */
  isolation: isolate;         /* ordena capas */
}

/* Canvas: tamaño + capa */
#neuralCanvas{
  display: block;
  width: 100%;
  height: 100%;
  opacity: 1;
}

/* Si el canvas está dentro del marco, que sea full-cover y quede atrás */
.neural-visual #neuralCanvas,
.neural-frame #neuralCanvas{
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
}

/* Todo lo de texto/overlays arriba del canvas (si aplica) */
.neural-phrases,
#neuralPhrase{
  position: relative;
  z-index: 2;
}

/* ===== PARCHE RESCATE: evita “pantalla negra” y respeta capas ===== */

/* 1) HERO: el canvas SIEMPRE atrás */
.hero{ position: relative; }
.hero #heroCanvas{
  z-index: -2 !important;
  opacity: .9 !important;
  pointer-events: none;
}

/* 2) HEADER: SOLO si tu canvas está dentro del header (si no, no afecta) */
.site-header{ overflow: hidden; }
.site-header .container{ position: relative; z-index: 2; }
.site-header #heroCanvas{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 0 !important;
  opacity: .35 !important;   /* bajito para que no “apague” el menú */
  pointer-events: none;
}

/* 3) IDEAS CONECTADAS: canvas siempre visible y con altura real */
.neural-visual,
.neural-frame{
  position: relative;
  min-height: 360px;
  isolation: isolate;
}
.neural-visual #neuralCanvas,
.neural-frame #neuralCanvas{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
  z-index: 0;
  pointer-events: none;
}
.neural-phrases,
#neuralPhrase{
  position: relative;
  z-index: 2;
}

/* ===========================
   FIX ÚNICO: CANVAS (HEADER + NEURAL)
   PÉGALO AL FINAL de style.css
   =========================== */

/* ---------- HEADER: robotcito visible, pero sin oscurecer el sitio ---------- */
.site-header{
  position: sticky;
  top: 0;
  z-index: 9999;
  overflow: hidden;
  isolation: isolate; /* ordena capas */
}

.site-header .container{
  position: relative;
  z-index: 2; /* menú arriba del canvas */
}

/* El canvas del header (heroCanvas) debe existir dentro del header */
.site-header #heroCanvas{
  position: absolute;
  inset: -28px 0;              /* “respira” sin salirse */
  width: 100%;
  height: calc(100% + 56px);
  z-index: 0;
  opacity: .35;                /* clave: si está en 1, te “apaga” todo */
  pointer-events: none;
}

/* ---------- NEURAL: altura real + canvas siempre visible ---------- */
.neural-visual,
.neural-frame{
  position: relative;
  min-height: 360px;           /* evita 0px (canvas absoluto no da altura) */
  border-radius: 22px;
  overflow: hidden;
  isolation: isolate;
}

.neural-visual #neuralCanvas,
.neural-frame #neuralCanvas{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block !important;
  z-index: 0;
  pointer-events: none;
}

/* texto siempre arriba del canvas */
.neural-phrases,
#neuralPhrase{
  position: relative;
  z-index: 2;
}

/* ===========================
   PATCH FINAL (seguro)
   - Evita “pantalla negra” por capas
   - Robotcito (#heroCanvas) NO tapa el nav
   - Neural (#neuralCanvas) SIEMPRE visible
   =========================== */

/* HEADER: canvas detrás del contenido del header */
.site-header{ overflow:hidden; }
.site-header .container{ position:relative; z-index:2; }

.site-header #heroCanvas{
  position:absolute;
  inset:-28px 0;                 /* un poquito más grande para que “respire” */
  width:100%;
  height:calc(100% + 56px);
  pointer-events:none;
  z-index:0;
  opacity:.35;                   /* clave: no apaga el menú */
}

/* IDEAS CONECTADAS: altura real + capas correctas */
.neural-visual,
.neural-frame{
  position:relative;
  min-height:360px;              /* evita 0px */
  isolation:isolate;
}

.neural-frame{ height:100%; }

.neural-visual #neuralCanvas,
.neural-frame #neuralCanvas{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  display:block;
  z-index:0;
  pointer-events:none;
}

.neural-phrases,
#neuralPhrase{
  position:relative;
  z-index:2;
}

/* ===========================
   PATCH SEGURO (pegar AL FINAL del style.css)
   - Devuelve el robot del hero (heroCanvas)
   - Aumenta contraste del menú
   - Asegura tamaño/visibilidad del canvas neuronal
   =========================== */

/* 1) Header / menú más visible */
.site-header{
  background: rgba(8,10,15,.78);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.site-nav a{ color: var(--ink); opacity:.92; }
.site-nav a:hover,
.site-nav a.is-active{ opacity:1; }
.nav-cta{ color:#050509; }

/* 2) Regresa el “robotcito” (heroCanvas) */
#heroCanvas{
  display:block !important;
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:0;
  opacity:.95;
}
.site-header .container,
.site-header .nav-row{ position:relative; z-index:2; }

/* 3) Neural canvas: tamaño, stacking y evitar que quede “negro” */
.neural-frame{
  position:relative;
  overflow:hidden;
  border-radius:26px;
  min-height:360px;
  background:
    radial-gradient(900px 520px at 15% 20%, rgba(242,183,5,.14), transparent 60%),
    radial-gradient(900px 520px at 85% 80%, rgba(225,59,59,.10), transparent 62%),
    linear-gradient(135deg, rgba(6,8,14,1), rgba(12,10,22,1));
  box-shadow: 0 18px 60px rgba(0,0,0,.45);
}
.neural-visual{ position:relative; min-height:360px; }
#neuralCanvas{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  display:block;
  opacity:1;
  z-index:0;
}
.neural-meta{ position:relative; z-index:2; }

/* si en tu CSS había filtros raros en esta sección, esto los neutraliza */
.neural-frame,
.neural-visual,
#neuralCanvas{ filter:none !important; }

/* Animación del chip "Output de la IA" */
.neural-phrase-line{
  opacity: 0;
  transform: translateY(6px);
  transition: opacity .35s ease, transform .35s ease;
}
.neural-phrase-line.is-visible{
  opacity: 1;
  transform: translateY(0);
}
